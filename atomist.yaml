#
#  Copyright Â© 2020 Atomist, Inc.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
# 
    
skill:
  name: atomist/github-branch-deletion-skill
  title: Auto-delete branches
  version: 2.0.3
  author: Atomist
  description: |-
    Automatically delete pull request branches when a pull request is closed.
  documentation: |-
    Automatically delete pull request branches when a pull request is closed. 
    No more dangling branches cluttering up your repositories, and no need to manually delete branches. 
    Use this skill to automatically delete branches when pull requests are closed or closed merged.
  category:
    - code_review
    - dev_ex
  license: Apache-2.0
  homepage: https://github.com/atomist-skills/github-branch-deletion-skill
  repository: https://github.com/atomist-skills/github-branch-deletion.git
  icon: file://docs/images/icon.svg
  video: https://images.atomist.com/skills/github-branch-deletion.gif

  package:
    use: atomist/package-npm-skill
    parameters:
      bundle: true
      sourceMaps: false
      minify: true

  runtime:
    memory: 1024
    name: nodejs10
    entry_point: entryPoint
    timeout: 60

resource_providers:
  - name: github
    description: GitHub
    type_name: GitHubAppResourceProvider
    min_required: 1
    max_allowed: 1
  - name: slack
    description: Slack
    type_name: SlackResourceProvider
    min_required: 0
    max_allowed: 1

parameters:
  - single_choice:
      name: deleteOn
      display_name: Default auto-deletion policy
      description: |-
        Branch deletion policy to apply when no explicit label is configured on a pull request
      options:
        - text: On pull request merge
          value: on-merge
        - text: On pull request close or merge
          value: on-close
      default_value: on-merge
      required: false
  - repo_filter:
      name: repos
      display_name: Repositories
      description: ''
      required: false

